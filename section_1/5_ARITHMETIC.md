# عملیات‌های ریاضی در Bash

در Bash، انجام عملیات‌های ریاضی می‌تواند با روش‌های مختلفی انجام شود. هر چند که Bash به عنوان یک شل اسکریپت‌نویسی اصلی برای دستورات متنی طراحی شده است، اما امکانات قدرتمندی برای انجام محاسبات عددی نیز فراهم می‌کند. در این آموزش، به انواع روش‌های انجام عملیات‌های ریاضی در Bash می‌پردازیم و نکات و ترفندهای جالبی را بررسی خواهیم کرد.

## انواع روش‌های انجام عملیات ریاضی

### 1. استفاده از `let`

دستور `let` یکی از ساده‌ترین روش‌ها برای انجام عملیات‌های ریاضی در Bash است. این دستور به صورت مستقیم روی متغیرها عمل می‌کند و نیازی به علامت `$` برای دسترسی به متغیرها ندارد.

مثال:

```bash
let RESULT=5+3
echo $RESULT  # خروجی: 8
```

شما می‌توانید از تمامی عملگرهای استاندارد ریاضی (جمع، تفریق، ضرب، تقسیم) استفاده کنید:

```bash
let RESULT=10-4
let RESULT=6*3
let RESULT=10/2
```

### 2. استفاده از `expr`

دستور `expr` یک ابزار قدیمی‌تر در Bash است که برای انجام عملیات ریاضی و همچنین پردازش رشته‌ها استفاده می‌شود. برخلاف `let`، نیاز به فاصله‌گذاری بین عملگرها دارد.

مثال:

```bash
RESULT=$(expr 5 + 3)
echo $RESULT  # خروجی: 8
```

نکته: از فاصله‌گذاری صحیح بین عملگرها و مقادیر اطمینان حاصل کنید، وگرنه با خطا مواجه خواهید شد.

### 3. استفاده از `$(( ... ))` (محاسبه درون‌شل)

یک روش بسیار رایج و کاربردی در Bash استفاده از دستور `$(( ... ))` است. این روش به شما امکان می‌دهد که محاسبات را مستقیماً در داخل شل انجام دهید.

مثال:

```bash
RESULT=$((5 + 3))
echo $RESULT  # خروجی: 8
```

می‌توانید از این روش برای محاسبات پیچیده‌تری نیز استفاده کنید:

```bash
RESULT=$(( (5 + 3) * 2 ))
echo $RESULT  # خروجی: 16
```

نکته: در این روش می‌توانید بدون نگرانی از فاصله‌گذاری، عملیات‌های ریاضی را در داخل پرانتزها بنویسید.

### 4. استفاده از `bc` برای محاسبات اعشاری

یکی از محدودیت‌های روش‌های بالا این است که تنها از اعداد صحیح پشتیبانی می‌کنند. اگر نیاز به محاسبات اعشاری دارید، می‌توانید از دستور `bc` استفاده کنید. `bc` یک ماشین حساب خط فرمان است که از محاسبات دقیق و اعشاری پشتیبانی می‌کند.

مثال:

```bash
RESULT=$(echo "scale=2; 10/3" | bc)
echo $RESULT  # خروجی: 3.33
```

در این مثال، `scale=2` تعداد ارقام اعشاری را مشخص می‌کند.

### 5. استفاده از `awk` برای محاسبات پیچیده

ابزار `awk` علاوه بر پردازش داده‌ها، برای انجام عملیات‌های ریاضی پیچیده نیز استفاده می‌شود. این ابزار برای محاسبات بزرگ‌تر و مدیریت داده‌های ستون‌بندی شده مناسب است.

مثال:

```bash
RESULT=$(echo "10 3" | awk '{print $1 / $2}')
echo $RESULT  # خروجی: 3.33333
```

### 6. استفاده از `declare` برای اعداد صحیح

می‌توانید متغیرها را به صورت اعداد صحیح تعریف کنید تا Bash آنها را به عنوان رشته پردازش نکند. برای این کار از دستور `declare` استفاده کنید:

```bash
declare -i NUM1=10
declare -i NUM2=3
RESULT=$((NUM1 + NUM2))
echo $RESULT  # خروجی: 13
```

### 7. استفاده از مقایسه‌های ریاضی

Bash امکان انجام مقایسه‌های ریاضی را نیز فراهم می‌کند. می‌توانید از `-eq`, `-ne`, `-lt`, `-le`, `-gt`, `-ge` برای مقایسه اعداد استفاده کنید:

مثال:

```bash
if [ $NUM1 -gt $NUM2 ]; then
  echo "$NUM1 بزرگتر از $NUM2 است."
else
  echo "$NUM1 کوچکتر یا مساوی $NUM2 است."
fi
```

## عملگرهای ریاضی در Bash

Bash از مجموعه‌ای از عملگرهای ریاضی استاندارد پشتیبانی می‌کند:

- **جمع**: `+`
- **تفریق**: `-`
- **ضرب**: `*`
- **تقسیم**: `/`
- **باقی‌مانده تقسیم (مدول)**: `%`

مثال:

```bash
NUM1=10
NUM2=3
SUM=$((NUM1 + NUM2))
DIFF=$((NUM1 - NUM2))
PRODUCT=$((NUM1 * NUM2))
QUOTIENT=$((NUM1 / NUM2))
MOD=$((NUM1 % NUM2))

echo "جمع: $SUM"
echo "تفریق: $DIFF"
echo "ضرب: $PRODUCT"
echo "تقسیم: $QUOTIENT"
echo "باقی‌مانده: $MOD"
```

## عملیات‌های افزایش و کاهش (Increment و Decrement)

در Bash می‌توانید متغیرها را به راحتی افزایش یا کاهش دهید:

- **افزایش (Increment)**:

  ```bash
  let COUNT=COUNT+1
  ```

  یا با استفاده از:

  ```bash
  ((COUNT++))
  ```

- **کاهش (Decrement)**:

  ```bash
  let COUNT=COUNT-1
  ```

  یا با استفاده از:

  ```bash
  ((COUNT--))
  ```

## ترفندهای جالب در عملیات ریاضی

### 1. محاسبه توان

برای محاسبه توان در Bash از `**` استفاده کنید:

```bash
RESULT=$((2 ** 3))  # 2 به توان 3
echo $RESULT  # خروجی: 8
```

### 2. محاسبه ریشه‌ مربعی با `bc`

می‌توانید از `bc` برای محاسبه ریشه مربعی استفاده کنید:

```bash
RESULT=$(echo "scale=2; sqrt(16)" | bc)
echo $RESULT  # خروجی: 4.00
```

### 3. تغییر مبنای عدد

Bash امکان تغییر مبنای عدد را نیز فراهم می‌کند. برای مثال، تبدیل اعداد دودویی به ده‌دهی:

```bash
RESULT=$((2#1010))  # عدد دودویی 1010 به ده‌دهی
echo $RESULT  # خروجی: 10
```

### 4. تولید اعداد تصادفی

برای تولید اعداد تصادفی می‌توانید از متغیر داخلی `$RANDOM` استفاده کنید:

```bash
echo $RANDOM
```

### 5. ایجاد محدوده برای اعداد تصادفی

برای محدود کردن عدد تصادفی به یک محدوده مشخص، از `mod` استفاده کنید:

```bash
echo $((RANDOM % 100))  # عدد تصادفی بین 0 تا 99
```

در اینجا یک جدول کامل از انواع عملگرهای ریاضی و منطقی در Bash قرار داده شده است. این جدول شامل عملگرهای اصلی، مقایسه‌ای، منطقی و عملگرهای افزایش/کاهش می‌باشد:

## جدول عملگرهای ریاضی و منطقی در Bash

### 1. Basic Arithmetic Operators (عملگرهای ریاضی پایه)

| عملگر | عملیات                | مثال            | توضیحات                 |
| ----- | --------------------- | --------------- | ----------------------- |
| `+`   | جمع                   | `a=$((5 + 3))`  | جمع دو عدد              |
| `-`   | تفریق                 | `a=$((5 - 3))`  | تفریق دو عدد            |
| `*`   | ضرب                   | `a=$((5 * 3))`  | ضرب دو عدد              |
| `/`   | تقسیم                 | `a=$((6 / 3))`  | تقسیم دو عدد            |
| `%`   | باقی‌مانده (مدول)     | `a=$((5 % 3))`  | باقی‌مانده تقسیم دو عدد |
| `**`  | توان (Exponentiation) | `a=$((2 ** 3))` | ۲ به توان ۳ (یعنی ۸)    |

### 2. Relational (Comparison) Operators (عملگرهای مقایسه‌ای)

| عملگر | عملیات             | مثال           | توضیحات                                       |
| ----- | ------------------ | -------------- | --------------------------------------------- |
| `-eq` | برابر با           | `[ 5 -eq 5 ]`  | بررسی اینکه آیا دو عدد برابر هستند یا خیر     |
| `-ne` | نابرابر با         | `[ 5 -ne 3 ]`  | بررسی نابرابری بین دو عدد                     |
| `-lt` | کوچکتر از          | `[ 5 -lt 10 ]` | بررسی اینکه آیا عدد اول کوچکتر از عدد دوم است |
| `-le` | کوچکتر یا برابر با | `[ 5 -le 10 ]` | بررسی کوچکتر یا برابر بودن عدد اول با عدد دوم |
| `-gt` | بزرگتر از          | `[ 5 -gt 3 ]`  | بررسی اینکه آیا عدد اول بزرگتر از عدد دوم است |
| `-ge` | بزرگتر یا برابر با | `[ 5 -ge 3 ]`  | بررسی بزرگتر یا برابر بودن عدد اول با عدد دوم |

### 3. Logical Operators (عملگرهای منطقی)

| عملگر  | عملیات             | مثال                         | توضیحات                                           |
| ------ | ------------------ | ---------------------------- | ------------------------------------------------- |
| `&&`   | منطقی "و" (AND)    | `[ $a -lt 5 && $b -gt 3 ]`   | بررسی اینکه هر دو شرط درست هستند یا خیر           |
| `\|\|` | منطقی "یا" (OR)    | `[ $a -lt 5 \|\| $b -gt 3 ]` | بررسی اینکه حداقل یکی از شرایط درست است           |
| `!`    | منطقی "نقیض" (NOT) | `[ ! $a -lt 5 ]`             | نقیض کردن یک شرط (بررسی اینکه شرط غلط است یا خیر) |

### 4. Increment and Decrement (عملگرهای افزایش و کاهش)

| عملگر | عملیات                    | مثال      | توضیحات                                                            |
| ----- | ------------------------- | --------- | ------------------------------------------------------------------ |
| `++`  | افزایش یک واحدی (پیشوندی) | `((++a))` | مقدار متغیر `a` را یک واحد افزایش می‌دهد، سپس استفاده می‌کند       |
| `--`  | کاهش یک واحدی (پیشوندی)   | `((--a))` | مقدار متغیر `a` را یک واحد کاهش می‌دهد، سپس استفاده می‌کند         |
| `++`  | افزایش یک واحدی (پسوندی)  | `((a++))` | از مقدار متغیر `a` استفاده می‌کند، سپس آن را یک واحد افزایش می‌دهد |
| `--`  | کاهش یک واحدی (پسوندی)    | `((a--))` | از مقدار متغیر `a` استفاده می‌کند، سپس آن را یک واحد کاهش می‌دهد   |

### توضیحات اضافی:

- **عملگرهای ریاضی پایه**: این عملگرها برای انجام محاسبات ساده ریاضی مانند جمع، تفریق، ضرب، تقسیم و توان استفاده می‌شوند.
- **عملگرهای مقایسه‌ای**: این عملگرها برای مقایسه اعداد به کار می‌روند و معمولاً در شروط (مثل `if` یا `while`) استفاده می‌شوند.
- **عملگرهای منطقی**: برای ترکیب چندین شرط منطقی در یک عبارت استفاده می‌شوند.
- **عملگرهای افزایش و کاهش**: برای افزایش یا کاهش مقدار یک متغیر به کار می‌روند و معمولاً در حلقه‌ها استفاده می‌شوند.

این جدول شامل تمامی عملگرهای اصلی و پیشرفته است که در Bash می‌توانید از آنها استفاده کنید.

## نتیجه‌گیری

در Bash، شما می‌توانید از چندین روش مختلف برای انجام عملیات‌های ریاضی استفاده کنید. ابزارهایی مانند `let`, `expr`, `$(( ... ))`, و `bc` همگی امکان انجام محاسبات ساده و پیچیده را فراهم می‌کنند. همچنین ترفندهای جالبی مانند تغییر مبنا، تولید اعداد تصادفی و محاسبه توان نیز Bash را به یک ابزار قدرتمند برای عملیات‌های ریاضی تبدیل می‌کند. مهم است که در پروژه‌های پیچیده‌تر از ابزار مناسب برای نیازهای خود استفاده کنید تا بهترین نتیجه را بگیرید.

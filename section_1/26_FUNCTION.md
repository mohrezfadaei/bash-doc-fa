# توابع (Function)

در زبان Bash، **فانکشن‌ها** یا توابع، بخش‌هایی از کد هستند که برای انجام یک کار خاص تعریف می‌شوند و می‌توانند در طول اسکریپت چندین بار فراخوانی شوند. استفاده از توابع باعث می‌شود کد کوتاه‌تر، خواناتر و نگهداری آن آسان‌تر شود. توابع همچنین به ما امکان می‌دهند که قطعاتی از کد را مجدداً استفاده کرده و از تکرار جلوگیری کنیم.

## نحو تعریف یک تابع در Bash

یک تابع در Bash با استفاده از کلمه کلیدی `function` و یا مستقیماً با نوشتن نام تابع و قرار دادن دو پرانتز باز و بسته تعریف می‌شود. در نهایت، بدنه تابع در بین `{}` قرار می‌گیرد.

### سینتکس

```bash
function function_name {
    # دستورات تابع
}
```

یا

```bash
function_name() {
    # دستورات تابع
}
```

### مثال ساده از تابع

```bash
function greet {
    echo "سلام! خوش آمدید."
}

greet  # فراخوانی تابع
```

در این مثال، تابع `greet` یک پیام ساده چاپ می‌کند. با فراخوانی `greet`، این پیام در خروجی نمایش داده می‌شود.

## استفاده از پارامترها در توابع

توابع در Bash می‌توانند پارامترها را به صورت آرگومان دریافت کنند. این پارامترها با استفاده از متغیرهایی مانند `$1`, `$2`, ... که نشان‌دهنده پارامترهای ورودی به ترتیب هستند، در داخل تابع دسترسی‌پذیر هستند.

### مثال تابع با پارامترها

```bash
function greet {
    echo "سلام $1! خوش آمدید."
}

greet "علی"  # فراخوانی تابع با پارامتر "علی"
```

در این مثال، تابع `greet` از پارامتر ورودی `$1` برای نمایش نام در پیام استفاده می‌کند.

## بازگشت مقدار از تابع

در Bash، توابع نمی‌توانند مقادیر را مستقیماً برگردانند. به جای آن، می‌توانند از دستور `return` برای برگرداندن یک کد وضعیت (exit code) استفاده کنند یا مقدار خروجی خود را از طریق دستور `echo` چاپ کنند. سپس، از قابلیت `$( )` برای دریافت این خروجی می‌توان استفاده کرد.

### مثال بازگشت مقدار از تابع

```bash
function add {
    result=$(( $1 + $2 ))
    echo $result
}

sum=$(add 5 10)
echo "مجموع: $sum"
```

در این مثال، تابع `add` دو عدد را جمع می‌کند و نتیجه را با `echo` چاپ می‌کند. این خروجی سپس با استفاده از `$( )` ذخیره می‌شود.

## تفاوت توابع در Bash با دیگر زبان‌های برنامه‌نویسی

توابع در Bash تفاوت‌هایی با توابع در زبان‌های برنامه‌نویسی دیگر دارند که در زیر به آن‌ها اشاره می‌شود:

1. **عدم پشتیبانی از تایپ داده‌ها**:

   - در Bash، نیازی به تعریف نوع داده‌ها نیست و تمامی داده‌ها به‌عنوان رشته (String) پردازش می‌شوند. این در حالی است که زبان‌های دیگر مانند Python یا C از تایپ داده‌ها پشتیبانی می‌کنند و نوع متغیرها مشخص است.

2. **محدودیت بازگشت مقدار**:

   - در Bash، توابع نمی‌توانند مقدارها را مستقیماً برگردانند. از دستور `return` تنها برای برگرداندن کد وضعیت استفاده می‌شود و برای بازگشت مقادیر، باید از `echo` یا تغییر متغیرها استفاده شود. در حالی که در زبان‌هایی مانند Python یا Java، می‌توان از `return` برای بازگشت هر نوع داده‌ای استفاده کرد.

3. **عدم پشتیبانی از متغیرهای محلی به صورت پیش‌فرض**:

   - در Bash، متغیرهای داخل تابع به‌طور پیش‌فرض `global` هستند. برای اینکه یک متغیر درون تابع محلی باشد، باید از کلمه کلیدی `local` استفاده شود. این در حالی است که در بسیاری از زبان‌ها، متغیرهای داخلی توابع به‌طور پیش‌فرض محلی هستند.

4. **ارسال آرگومان‌ها به صورت پوستی**:

   - در Bash، پارامترهای ورودی تابع از طریق متغیرهای شماره‌گذاری شده مانند `$1`, `$2`, و غیره دسترسی‌پذیر هستند، نه از طریق نام‌گذاری پارامترها. در حالی که در زبان‌های دیگر، پارامترها نام‌گذاری شده و دسترسی به آن‌ها راحت‌تر است.

5. **ساختار محدودتر**:

   - توابع در Bash ساختار و قابلیت‌های محدودی نسبت به زبان‌های برنامه‌نویسی دیگر دارند. برای مثال، Bash از ویژگی‌هایی مانند تابع‌های بازگشتی پیچیده یا برنامه‌نویسی شیءگرا پشتیبانی نمی‌کند.

6. **کدنویسی متفاوت برای خطایابی و کنترل جریان**:
   - در زبان‌های برنامه‌نویسی مانند Python یا Java می‌توان از `try-catch` برای مدیریت خطاها استفاده کرد. اما در Bash، مدیریت خطاها معمولاً از طریق کدهای خروجی (exit codes) و دستورات شرطی انجام می‌شود.

### جمع‌بندی تفاوت‌ها به صورت جدول

| ویژگی                        | توابع در Bash                                 | توابع در زبان‌های دیگر                          |
| ---------------------------- | --------------------------------------------- | ----------------------------------------------- |
| نوع داده                     | رشته بدون تایپ خاص                            | پشتیبانی از انواع داده                          |
| بازگشت مقدار                 | تنها از طریق کد وضعیت (با `return`) یا `echo` | بازگشت انواع مختلف داده با `return`             |
| متغیرهای محلی                | نیاز به استفاده از `local`                    | متغیرها به‌طور پیش‌فرض محلی هستند               |
| نام‌گذاری پارامترها          | پارامترها به صورت پوستی (`$1`, `$2`, ...)     | پارامترهای نام‌گذاری شده                        |
| پشتیبانی از ویژگی‌های پیچیده | محدود به دستورات ساده و پردازش رشته‌ها        | پشتیبانی از شیءگرایی، بازگشت چند نوع داده و ... |
| مدیریت خطا                   | از طریق کدهای خروجی و دستورات شرطی            | استفاده از `try-catch` و ساختارهای مدیریت خطا   |

---

## جمع‌بندی

توابع در Bash ابزاری ساده و قدرتمند برای مدیریت کد و کاهش تکرار هستند، اما تفاوت‌های قابل توجهی با توابع در زبان‌های برنامه‌نویسی پیشرفته‌تر دارند. از جمله این تفاوت‌ها می‌توان به ساختار ساده‌تر، محدودیت در بازگشت مقادیر و عدم پشتیبانی از تایپ داده‌ها اشاره کرد. با این حال، توابع در Bash می‌توانند با استفاده از قابلیت‌هایی مانند `local`، `return` و `$( )` به شکل موثری در اسکریپت‌های Bash استفاده شوند و به بهبود ساختار و خوانایی کد کمک کنند.

# راهنمای جامع درباره آرایه‌ها در Bash

آرایه‌ها در Bash به شما این امکان را می‌دهند که چندین مقدار را در یک متغیر ذخیره کرده و به‌راحتی به آن‌ها دسترسی پیدا کنید. برخلاف اکثر زبان‌های برنامه‌نویسی، آرایه‌ها در Bash می‌توانند مقادیری از انواع مختلف را در خود نگه‌دارند (رشته‌ها، اعداد و ...). در این مستند، به بررسی روش‌های ایجاد آرایه، ابزارهای کار با آرایه‌ها و نحوه مدیریت آن‌ها می‌پردازیم.

## 1. تعریف آرایه‌ها در Bash

در Bash، آرایه‌ها به دو نوع اصلی تقسیم می‌شوند:

- **آرایه‌های اندیسی (Indexed Arrays)**: هر عنصر یک اندیس عددی دارد.
- **آرایه‌های مرتبط (Associative Arrays)**: از کلید‌های غیرعددی برای دسترسی به عناصر استفاده می‌شود (از Bash 4.0 به بعد).

### 1.1. آرایه‌های اندیسی

آرایه‌های اندیسی، آرایه‌هایی هستند که در آن‌ها هر عنصر با یک اندیس عددی شناخته می‌شود.

#### روش‌های ایجاد آرایه اندیسی:

1. استفاده از علامت پرانتز:

   ```bash
   my_array=("apple" "banana" "cherry")
   ```

2. افزودن مقدار به یک اندیس خاص:

   ```bash
   my_array[0]="apple"
   my_array[1]="banana"
   ```

3. استفاده از `declare`:
   ```bash
   declare -a my_array
   my_array=("apple" "banana" "cherry")
   ```

### 1.2. آرایه‌های مرتبط (Associative Arrays)

آرایه‌های مرتبط به شما امکان می‌دهند که از کلیدهای غیرعددی برای دسترسی به مقادیر استفاده کنید. این ویژگی از Bash 4.0 به بعد پشتیبانی می‌شود.

#### روش ایجاد آرایه مرتبط:

1. استفاده از `declare`:

   ```bash
   declare -A my_associative_array
   my_associative_array=([name]="Alice" [age]="30" [city]="New York")
   ```

2. افزودن مقدار به یک کلید خاص:
   ```bash
   my_associative_array[name]="Alice"
   my_associative_array[age]="30"
   ```

## 2. دسترسی به عناصر آرایه

### 2.1. دسترسی به عناصر در آرایه‌های اندیسی

برای دسترسی به یک عنصر خاص از آرایه‌های اندیسی، از نام آرایه به همراه اندیس عنصر استفاده می‌شود.

#### مثال:

```bash
echo "${my_array[0]}"  # خروجی: apple
echo "${my_array[1]}"  # خروجی: banana
```

### 2.2. دسترسی به عناصر در آرایه‌های مرتبط

برای دسترسی به یک عنصر در آرایه‌های مرتبط، از کلید آن عنصر استفاده می‌شود.

#### مثال:

```bash
echo "${my_associative_array[name]}"  # خروجی: Alice
echo "${my_associative_array[city]}"  # خروجی: New York
```

## 3. افزودن و تغییر عناصر آرایه

### 3.1. افزودن عنصر جدید به آرایه‌های اندیسی

می‌توانید با تعیین اندیس جدید، عنصر جدیدی به آرایه اضافه کنید.

#### مثال:

```bash
my_array[3]="orange"
```

### 3.2. افزودن عنصر جدید به آرایه‌های مرتبط

برای افزودن عنصر جدید به آرایه‌های مرتبط، کافی است یک کلید جدید تعریف کنید.

#### مثال:

```bash
my_associative_array[country]="USA"
```

## 4. پیمایش و پردازش عناصر آرایه

### 4.1. پیمایش آرایه‌های اندیسی

با استفاده از حلقه `for` و دستور `${my_array[@]}` می‌توانید به تمام عناصر آرایه دسترسی پیدا کنید.

#### مثال:

```bash
for element in "${my_array[@]}"; do
    echo "$element"
done
```

### 4.2. پیمایش آرایه‌های مرتبط

برای پیمایش آرایه‌های مرتبط از `${!my_associative_array[@]}` استفاده می‌کنیم که لیست کلیدها را برمی‌گرداند.

#### مثال:

```bash
for key in "${!my_associative_array[@]}"; do
    echo "$key: ${my_associative_array[$key]}"
done
```

## 5. ابزارهای کار با آرایه‌ها

### 5.1. تعداد عناصر آرایه

برای به دست آوردن تعداد عناصر یک آرایه، از `${#array[@]}` استفاده می‌شود.

#### مثال:

```bash
echo "Number of elements: ${#my_array[@]}"
```

### 5.2. حذف یک عنصر از آرایه

برای حذف یک عنصر خاص از آرایه، از دستور `unset` استفاده می‌شود.

#### مثال حذف عنصر از آرایه اندیسی:

```bash
unset my_array[1]  # حذف عنصر با اندیس 1
```

#### مثال حذف عنصر از آرایه مرتبط:

```bash
unset my_associative_array[age]  # حذف عنصر با کلید age
```

### 5.3. دسترسی به تمام عناصر

برای دسترسی به تمام عناصر یک آرایه، از `${array[@]}` یا `${array[*]}` استفاده می‌شود.

#### مثال:

```bash
echo "${my_array[@]}"  # چاپ تمام عناصر
```

### 5.4. دسترسی به تمام اندیس‌ها

برای دسترسی به تمام اندیس‌های یک آرایه اندیسی، از `${!array[@]}` استفاده می‌شود.

#### مثال:

```bash
echo "${!my_array[@]}"  # چاپ تمام اندیس‌های آرایه
```

### 5.5. مقداردهی مجدد به کل آرایه

برای مقداردهی مجدد به کل آرایه می‌توانید آرایه را دوباره تعریف کنید:

```bash
my_array=("new_value1" "new_value2")
```

یا برای آرایه‌های مرتبط:

```bash
declare -A my_associative_array=([key1]="value1" [key2]="value2")
```

## 6. آرایه‌های چندبعدی در Bash

در Bash به طور مستقیم از آرایه‌های چندبعدی پشتیبانی نمی‌شود، اما می‌توان با ترکیب آرایه‌های عادی، آرایه‌های چندبعدی شبیه‌سازی کرد.

### مثال:

```bash
my_array1=("apple" "banana")
my_array2=("carrot" "tomato")

multi_array=("${my_array1[@]}" "${my_array2[@]}")
```

## 7. نکات و ترفندها

### 7.1. مقادیر پیش‌فرض آرایه‌ها

می‌توانید یک آرایه را بدون مقداردهی اولیه تعریف کنید و سپس به صورت پویا به آن مقدار اضافه کنید.

```bash
declare -a new_array
new_array[0]="value1"
```

### 7.2. بررسی وجود کلید در آرایه مرتبط

برای بررسی اینکه یک کلید در آرایه مرتبط وجود دارد یا نه، می‌توانید از ساختار زیر استفاده کنید:

```bash
if [[ -v my_associative_array[key] ]]; then
    echo "Key exists."
else
    echo "Key does not exist."
fi
```

## جدول خلاصه‌ای از ابزارها و دستورات کار با آرایه‌ها

| دستور                          | توضیحات                              | مثال                                 |
| ------------------------------ | ------------------------------------ | ------------------------------------ |
| `declare -a array`             | تعریف آرایه اندیسی                   | `declare -a my_array`                |
| `declare -A array`             | تعریف آرایه مرتبط                    | `declare -A my_associative_array`    |
| `${array[@]}`                  | دسترسی به تمام عناصر آرایه           | `echo "${my_array[@]}"`              |
| `${!array[@]}`                 | دسترسی به تمام اندیس‌های آرایه       | `echo "${!my_array[@]}"`             |
| `${#array[@]}`                 | به دست آوردن تعداد عناصر آرایه       | `echo "${#my_array[@]}"`             |
| `unset array[index]`           | حذف یک عنصر از آرایه اندیسی          | `unset my_array[1]`                  |
| `unset array[key]`             | حذف یک عنصر از آرایه مرتبط           | `unset my_associative_array[age]`    |
| `for element in "${array[@]}"` | پیمایش عناصر آرایه اندیسی            | `for element in "${my_array[@]}"`    |
| `for key in "${!array[@]}"`    | پیمایش کلیدها و عناصر در آرایه مرتبط | `for key in "${!my_associative[@]}"` |

## جمع‌بندی

در این راهنما به بررسی کامل آرایه‌ها در Bash پرداختیم. شما یاد گرفتید که چگونه آرایه‌های اندیسی و مرتبط ایجاد کرده، عناصر آن‌ها را دستکاری کرده و از ابزارهای مختلف برای مدیریت آرایه‌ها استفاده کنید. همچنین روش‌های پیمایش و حذف عناصر از آرایه‌ها و همچنین ابزارهای مختلف برای پردازش آرایه‌ها را یاد گرفتید. این دانش به شما کمک می‌کند تا اسکریپت‌های Bash خود را به شکل کارآمدتر و پیشرفته‌تری بنویسید.

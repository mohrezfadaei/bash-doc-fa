# عملیات‌های ریاضی در Bash (پیشرفته)

در ادامه به بررسی عمیق‌تر عملیات‌های ریاضی در Bash پرداخته و روش‌های رسم جدول و نکات پیشرفته‌تری از کار با اعداد و عملیات‌های ریاضی در Bash را توضیح خواهیم داد.

## رسم جدول در Bash

شما می‌توانید با استفاده از دستورات `for` و `printf` جداول ساده‌ای در Bash رسم کنید. این جداول می‌توانند شامل مقادیر مختلف، مانند اعداد یا نتایج عملیات ریاضی، باشند. در این بخش، نحوه رسم یک جدول ضرب را بررسی خواهیم کرد.

### مثال: رسم جدول ضرب

```bash
#!/bin/bash

# رسم جدول ضرب تا 10x10
echo "جدول ضرب 10x10"
echo "-----------------------"

# هدر جدول
printf "%4s" "X"
for i in {1..10}; do
  printf "%4d" $i
done
echo ""

echo "-----------------------"

# بدنه جدول
for i in {1..10}; do
  printf "%4d" $i  # چاپ عدد ستون اول
  for j in {1..10}; do
    printf "%4d" $((i * j))  # محاسبه و چاپ ضرب اعداد
  done
  echo ""  # خط جدید پس از هر ردیف
done
```

### خروجی:

```
جدول ضرب 10x10
-----------------------
   X   1   2   3   4   5   6   7   8   9  10
-----------------------
   1   1   2   3   4   5   6   7   8   9  10
   2   2   4   6   8  10  12  14  16  18  20
   3   3   6   9  12  15  18  21  24  27  30
   4   4   8  12  16  20  24  28  32  36  40
   5   5  10  15  20  25  30  35  40  45  50
   6   6  12  18  24  30  36  42  48  54  60
   7   7  14  21  28  35  42  49  56  63  70
   8   8  16  24  32  40  48  56  64  72  80
   9   9  18  27  36  45  54  63  72  81  90
  10  10  20  30  40  50  60  70  80  90 100
```

در این مثال، از حلقه‌های `for` برای محاسبه ضرب اعداد 1 تا 10 و رسم یک جدول ضرب ساده استفاده کردیم.

### نکته: استفاده از `printf`

استفاده از `printf` به شما امکان می‌دهد تا اعداد را با فرمت‌بندی خاص و فاصله‌های یکنواخت چاپ کنید. این ابزار برای ساخت جداول و تنظیمات نمایشگر بسیار مفید است.

## انجام محاسبات پیچیده با `bc`

برای محاسبات پیچیده‌تر، همان‌طور که قبلاً گفته شد، ابزار `bc` بسیار مفید است. بیایید نحوه محاسبه عبارات پیچیده‌تری مانند انتگرال یا توابع مثلثاتی را بررسی کنیم.

### مثال: محاسبه توابع مثلثاتی

با استفاده از `bc`، شما می‌توانید توابع مثلثاتی مانند سینوس و کسینوس را محاسبه کنید:

```bash
#!/bin/bash

# محاسبه سینوس و کسینوس یک زاویه (در رادیان)
angle=1.0  # زاویه به رادیان
sin_value=$(echo "scale=4; s($angle)" | bc -l)
cos_value=$(echo "scale=4; c($angle)" | bc -l)

echo "سینوس زاویه $angle: $sin_value"
echo "کسینوس زاویه $angle: $cos_value"
```

### خروجی:

```
سینوس زاویه 1.0: 0.8415
کسینوس زاویه 1.0: 0.5403
```

### نکته: استفاده از `-l` در `bc`

گزینه `-l` به `bc` امکان می‌دهد که کتابخانه ریاضی پیشرفته را بارگذاری کند، که شامل توابع مثلثاتی و لگاریتم‌هاست.

## محاسبات ترکیبی با استفاده از `bc`

شما می‌توانید از `bc` برای انجام محاسبات ترکیبی مانند توان، لگاریتم و ریشه‌های عددی استفاده کنید.

### مثال: محاسبه ریشه سوم و لگاریتم

```bash
#!/bin/bash

# محاسبه ریشه سوم یک عدد
number=27
cube_root=$(echo "scale=3; e( l($number)/3 )" | bc -l)

# محاسبه لگاریتم طبیعی (ln)
log_value=$(echo "scale=3; l($number)" | bc -l)

echo "ریشه سوم $number: $cube_root"
echo "لگاریتم طبیعی $number: $log_value"
```

### خروجی:

```
ریشه سوم 27: 3.000
لگاریتم طبیعی 27: 3.296
```

## کار با اعداد بزرگ در Bash

در محاسبات پیچیده و یا کار با اعداد بزرگ، Bash محدودیت‌هایی دارد، اما با استفاده از `bc` می‌توانیم به راحتی با اعداد بزرگ کار کنیم.

### مثال: محاسبه فاکتوریل یک عدد بزرگ

محاسبه فاکتوریل یک عدد بزرگ با استفاده از یک اسکریپت ساده امکان‌پذیر است:

```bash
#!/bin/bash

# محاسبه فاکتوریل یک عدد با استفاده از bc
factorial=1
number=20
for (( i=1; i<=number; i++ ))
do
  factorial=$(echo "$factorial * $i" | bc)
done

echo "فاکتوریل $number: $factorial"
```

### خروجی:

```
فاکتوریل 20: 2432902008176640000
```

## جمع‌بندی

در این آموزش به بررسی عملیات‌های مختلف ریاضی در Bash پرداختیم. در این میان به روش‌های زیر اشاره کردیم:

- استفاده از `let`، `expr` و `$(( ... ))` برای انجام عملیات ساده.
- استفاده از `bc` و `awk` برای محاسبات پیشرفته‌تر و دقیق‌تر.
- رسم جدول ضرب با استفاده از `printf` و حلقه‌های `for`.
- انجام محاسبات پیچیده مانند توابع مثلثاتی، لگاریتم‌ها و ریشه‌ها با استفاده از `bc`.
- کار با اعداد بزرگ و فاکتوریل‌گیری.

### نکات پیشرفته و ترفندها:

- **فرمت‌دهی اعداد**: برای نمایش اعداد با تعداد مشخصی رقم اعشار از `printf` یا `scale` در `bc` استفاده کنید.
- **محاسبات اعشاری**: برای دقت بیشتر در محاسبات اعشاری همیشه از `bc` استفاده کنید.
- **تغییر مبنا**: در `bc` می‌توانید از `ibase` و `obase` برای تغییر مبنا استفاده کنید (مثلاً تبدیل بین مبناهای 2 و 10).

```bash
echo "obase=10; ibase=2; 1010" | bc  # تبدیل عدد دودویی 1010 به ده‌دهی
```

این ترفندها به شما کمک می‌کنند تا قدرت Bash را در انجام عملیات‌های ریاضی و پردازش اعداد بیشتر درک کنید و از آن به صورت کارآمدتر استفاده کنید.
